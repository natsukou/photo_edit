<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>重置应用状态</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            margin-top: 0;
        }
        button {
            background: #333;
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 10px;
        }
        button:hover {
            background: #555;
        }
        .info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
        .success {
            background: #c8e6c9;
            padding: 15px;
            border-radius: 4px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>�� 重置应用状态</h1>
        
        <div class="info" id="currentState">
            <strong>当前状态：</strong><br>
            配额：<span id="quota">-</span> 张<br>
            上次重置：<span id="lastReset">-</span>
        </div>
        
        <button onclick="resetQuota()">重置配额为20</button>
        <button onclick="clearAll()">清除所有数据</button>
        <button onclick="goToApp()">返回应用</button>
        
        <div id="result"></div>
    </div>
    
    <script>
        // 显示当前状态
        function showCurrentState() {
            const quota = localStorage.getItem('remainingQuota');
            const lastReset = localStorage.getItem('lastResetDate');
            document.getElementById('quota').innerText = quota || '未设置';
            document.getElementById('lastReset').innerText = lastReset || '从未重置';
        }
        
        // 重置配额
        function resetQuota() {
            const today = new Date().toDateString();
            localStorage.setItem('remainingQuota', '20');
            localStorage.setItem('lastResetDate', today);
            showResult('✅ 配额已重置为20张，刷新页面即可生效！', 'success');
            showCurrentState();
        }
        
        // 清除所有数据
        function clearAll() {
            localStorage.clear();
            showResult('✅ 所有本地数据已清除，下次访问将重新初始化！', 'success');
            showCurrentState();
        }
        
        // 显示结果
        function showResult(message, type) {
            const result = document.getElementById('result');
            result.className = type || '';
            result.innerHTML = `<div class="${type}">${message}</div>`;
        }
        
        // 返回应用
        function goToApp() {
            window.location.href = '/';
        }
        
        // 页面加载时显示当前状态
        showCurrentState();
    </script>
</body>
</html>
